<template>
  <Diagram>
    <div class="space-y-6 md:space-y-8">
      <!-- è»¸ãƒ©ã‚¤ãƒ³ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: æ¨ªã€ãƒ¢ãƒã‚¤ãƒ«: ç¸¦ï¼‰ -->
      <div class="flex md:hidden flex-col items-center">
        <span class="text-xs font-medium text-gray-600 dark:text-gray-400 mb-2">æŠ½è±¡</span>
        <div class="w-0.5 h-12 bg-gray-300 dark:bg-gray-600"></div>
        <span class="text-xs font-medium text-gray-600 dark:text-gray-400 mt-2">å…·ä½“</span>
      </div>
      <div class="hidden md:flex items-center justify-between">
        <span class="text-sm font-medium text-gray-600 dark:text-gray-400">æŠ½è±¡</span>
        <div class="flex-1 h-0.5 bg-gray-300 dark:bg-gray-600 mx-4"></div>
        <span class="text-sm font-medium text-gray-600 dark:text-gray-400">å…·ä½“</span>
      </div>

      <!-- 3ã¤ã®ã‚¾ãƒ¼ãƒ³ -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <!-- ç¨® -->
        <div class="text-center">
          <div
            class="bg-red-50 dark:bg-red-900/30 rounded-lg p-4 border-2 border-red-200 dark:border-red-800 mb-3"
          >
            <p class="text-3xl mb-2">ğŸŒ±</p>
            <p class="font-bold text-red-900 dark:text-red-200 mb-1">ç¨®</p>
            <p class="text-xs text-red-700 dark:text-red-300">åˆ¶ç´„ãŒå°‘ãªã™ãã‚‹</p>
          </div>
          <div class="text-xs md:text-sm text-gray-700 dark:text-gray-300 mb-2">
            æ–¹å‘æ€§ã¯ã‚ã‚‹ãŒã€è§£é‡ˆã®ä½™åœ°ãŒå¤§ãã™ãã‚‹ã€‚
          </div>
          <div class="text-xs md:text-xs text-gray-500 dark:text-gray-400 italic">
            ã€Œã‚ã‹ã‚Šã‚„ã™ãã€ã€Œã„ã„æ„Ÿã˜ã«ã€
          </div>
        </div>

        <!-- å¹¹ -->
        <div class="text-center">
          <div
            class="bg-green-50 dark:bg-green-900/30 rounded-lg p-4 border-2 border-green-500 shadow-lg mb-3"
          >
            <p class="text-3xl mb-2">ğŸŒ³</p>
            <p class="font-bold text-green-900 dark:text-green-200 mb-1">å¹¹</p>
            <p class="text-xs text-green-700 dark:text-green-300">æœ€é©ãªåˆ¶ç´„</p>
          </div>
          <div class="text-xs md:text-sm text-gray-700 dark:text-gray-300 mb-2">
            åˆ¤æ–­ã®åˆ†å²ç‚¹ã‚’è¦å®šã™ã‚‹ã€‚ã“ã‚ŒãŒã‚ã‚Œã°ã€æ®‹ã‚Šã¯è«–ç†çš„ã«å°å‡ºã§ãã‚‹ã€‚
          </div>
          <div class="text-xs md:text-xs text-gray-500 dark:text-gray-400 italic">
            ã€ŒæŠ€è¡“çŸ¥è­˜ã®ãªã„æ±ºè£è€…ãŒã€5åˆ†ã§æŠ•è³‡åˆ¤æ–­ã§ãã‚‹è³‡æ–™ã€
          </div>
        </div>

        <!-- æè‘‰ -->
        <div class="text-center">
          <div
            class="bg-orange-50 dark:bg-orange-900/30 rounded-lg p-4 border-2 border-orange-200 dark:border-orange-800 mb-3"
          >
            <p class="text-3xl mb-2">ğŸƒ</p>
            <p class="font-bold text-orange-900 dark:text-orange-200 mb-1">æè‘‰</p>
            <p class="text-xs text-orange-700 dark:text-orange-300">åˆ¶ç´„ãŒå¤šã™ãã‚‹</p>
          </div>
          <div class="text-xs md:text-sm text-gray-700 dark:text-gray-300 mb-2">
            å¹¹ã‹ã‚‰è«–ç†çš„ã«å°ã‘ã‚‹æƒ…å ±ã‚„ã€AIãŒå­¦ç¿’æ¸ˆã¿ã®æ…£ç¿’ã€‚
          </div>
          <div class="text-xs md:text-xs text-gray-500 dark:text-gray-400 italic">
            ã€Œç®‡æ¡æ›¸ãã¯5é …ç›®ã§ã€ã€Œã‚°ãƒ©ãƒ•ã¯æ£’ã‚°ãƒ©ãƒ•ã§ã€
          </div>
        </div>
      </div>

      <!-- Chart.js ã‚°ãƒ©ãƒ• -->
      <div class="pt-4">
        <div class="w-full max-w-[640px] mx-auto">
          <Line :data="chartData" :options="chartOptions" />
        </div>

        <!-- èª¬æ˜ -->
        <div class="mt-4 text-center text-sm text-gray-500 dark:text-gray-400">
          <p>
            <strong class="text-green-600 dark:text-green-400">å¹¹</strong
            >ã¯ã€åˆ¶ç´„ã¨å“è³ªã®ã‚¹ã‚¤ãƒ¼ãƒˆã‚¹ãƒãƒƒãƒˆ
          </p>
        </div>
      </div>
    </div>
  </Diagram>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { Line } from 'vue-chartjs'
import {
  Chart as ChartJS,
  CategoryScale,
  LinearScale,
  PointElement,
  LineElement,
  Title,
  Tooltip,
  Legend,
  type ChartOptions,
  type ChartData,
} from 'chart.js'

// Chart.js ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç™»éŒ²
ChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend)

// ã‚·ã‚°ãƒ¢ã‚¤ãƒ‰é–¢æ•°ã§ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆç”Ÿæˆï¼ˆå¤‰æ›²ç‚¹ã‚’å·¦ã«ã‚·ãƒ•ãƒˆãƒ»æ€¥å‹¾é…ï¼‰
const generateSigmoidData = () => {
  const points = []
  for (let x = 0; x <= 100; x += 2) {
    // ã‚·ã‚°ãƒ¢ã‚¤ãƒ‰é–¢æ•°: 1 / (1 + e^(-(x-35)/8))
    // å¤‰æ›²ç‚¹ã‚’ x=35ã€å‹¾é…ã‚’æ€¥ã«ï¼ˆä¿‚æ•°ã‚’12â†’8ã«ï¼‰
    const y = 100 / (1 + Math.exp(-(x - 35) / 8))
    points.push({ x, y })
  }
  return points
}

const sigmoidData = generateSigmoidData()

// Chart.js ãƒ‡ãƒ¼ã‚¿
const chartData = computed<ChartData<'line'>>(() => ({
  datasets: [
    // æ›²ç·šã‚’å…ˆã«æç”»
    {
      label: 'å“è³ª',
      data: sigmoidData,
      borderColor: 'rgb(59, 130, 246)',
      backgroundColor: 'rgba(59, 130, 246, 0.1)',
      borderWidth: 3,
      pointRadius: 0,
      tension: 0,
      fill: false,
      order: 2, // å¾Œã‚ã«æç”»
    },
    // ãƒãƒ¼ã‚«ãƒ¼ã‚’å¾Œã‹ã‚‰æç”»ï¼ˆå‰é¢ã«æ¥ã‚‹ï¼‰
    // ç¨®ã®ãƒã‚¤ãƒ³ãƒˆ
    {
      label: 'ç¨®',
      data: [{ x: 15, y: 100 / (1 + Math.exp(-(15 - 35) / 8)) }],
      borderColor: '#f43f5e',
      backgroundColor: '#f43f5e',
      pointRadius: 8,
      pointHoverRadius: 10,
      showLine: false,
      order: 1, // å‰é¢ã«æç”»
    },
    // å¹¹ã®ãƒã‚¤ãƒ³ãƒˆï¼ˆä¸­å¿ƒã«é…ç½®ï¼‰
    {
      label: 'å¹¹ï¼ˆå¤‰æ›²ç‚¹ï¼‰',
      data: [{ x: 50, y: 100 / (1 + Math.exp(-(50 - 35) / 8)) }],
      borderColor: '#10b981',
      backgroundColor: '#10b981',
      pointRadius: 10,
      pointHoverRadius: 12,
      showLine: false,
      order: 1, // å‰é¢ã«æç”»
    },
    // æè‘‰ã®ãƒã‚¤ãƒ³ãƒˆï¼ˆå³ã«é…ç½®ï¼‰
    {
      label: 'æè‘‰',
      data: [{ x: 85, y: 100 / (1 + Math.exp(-(85 - 35) / 8)) }],
      borderColor: '#f59e0b',
      backgroundColor: '#f59e0b',
      pointRadius: 8,
      pointHoverRadius: 10,
      showLine: false,
      order: 1, // å‰é¢ã«æç”»
    },
  ],
}))

// Chart.js ã‚ªãƒ—ã‚·ãƒ§ãƒ³
const chartOptions = computed<ChartOptions<'line'>>(() => ({
  responsive: true,
  maintainAspectRatio: true,
  plugins: {
    legend: {
      display: true,
      position: 'bottom',
      labels: {
        color: 'rgb(107, 114, 128)',
        usePointStyle: true,
        padding: 12,
        font: {
          size: 12,
        },
        filter: (item) => {
          // ã€Œå“è³ªã€ãƒ©ãƒ™ãƒ«ã‚’é™¤å¤–
          return item.text !== 'å“è³ª'
        },
      },
    },
    tooltip: {
      enabled: false, // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ç„¡åŠ¹åŒ–
    },
  },
  scales: {
    x: {
      type: 'linear',
      title: {
        display: true,
        text: 'AIã«ä¸ãˆã‚‹åˆ¶ç´„ã®é‡',
        color: 'rgb(107, 114, 128)',
        font: {
          size: 13,
        },
      },
      ticks: {
        display: false,
      },
      grid: {
        color: 'rgba(156, 163, 175, 0.1)',
        drawTicks: false,
      },
      border: {
        color: 'rgba(156, 163, 175, 0.3)',
      },
    },
    y: {
      title: {
        display: true,
        text: 'å“è³ª',
        color: 'rgb(107, 114, 128)',
        font: {
          size: 13,
        },
      },
      ticks: {
        display: false,
      },
      grid: {
        color: 'rgba(156, 163, 175, 0.1)',
        drawTicks: false,
      },
      border: {
        color: 'rgba(156, 163, 175, 0.3)',
      },
    },
  },
  interaction: {
    intersect: false,
    mode: 'index',
  },
}))
</script>
